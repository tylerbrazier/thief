<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!--
      mobile friendly
      https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag
      https://developers.google.com/web/fundamentals/design-and-ux/responsive/
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Thief</title>

    <link rel="stylesheet" href="/assets/styles.css">
  </head>
  <body>
    <form action="/download" method="post">
      <div>
        <label for="url">Youtube URL</label>
        <input type="text" id="url" name="url" value="<%= url %>">
      </div>

      <div>
        <label for="filename">Filename (extension can be mp3 or webm)</label>
        <input type="text" id="filename" name="filename" value="<%= filename %>">
      </div>

      <div id="tags">
        <div>
          <label for="artist">Artist (for mp3 tag)</label>
          <input type="text" id="artist" name="artist" value="<%= artist %>">
        </div>
        <div>
          <label for="title">Title (for mp3 tag)</label>
          <input type="text" id="title" name="title" value="<%= title %>">
        </div>
      </div>

      <div>
        <button type="submit">Download</button>
      </div>
    </form>

    <script>
      // only show the artist and title fields if filename ends in .mp3

      var $filename = document.getElementById('filename')
      var $tags = document.getElementById('tags')

      showOrHide()
      $filename.addEventListener('input', showOrHide)

      function showOrHide () {
        $tags.style.display = $filename.value.endsWith('.mp3') ? '' : 'none'
      }
    </script>
  </body>
</html>
